é¡¹ç›®ä¸­æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦ä»¥è·‘é©¬ç¯çš„å½¢åŠ¿æ»šåŠ¨å±•ç¤ºç”¨æˆ·çš„å®æ—¶æ•°æ®ï¼Œè·‘é©¬ç¯éœ€è¦æœ‰ç”¨æˆ·å¤´åƒï¼Œå†…å®¹çš„é•¿åº¦ä¸å›ºå®šï¼Œå¹¶ä¸”å¯ä»¥ç‚¹å‡»ï¼Œæ»šåŠ¨æ•ˆæœè¿˜è¦è¶³å¤Ÿæµç•…ï¼Œæœ¬ç€ä¸é‡å¤é€ è½®å­çš„å¿ƒç†ï¼Œåœ¨ç½‘ä¸Šå„ç§æœç´¢ï¼Œå‘ç°éƒ½æ²¡æ³•æ‰¾åˆ°æ»¡è¶³éœ€æ±‚çš„demoï¼Œæ²¡åŠæ³•ï¼Œæœ¬æ¥(Ë‡ËË‡) æƒ³ï½å·ä¸ªæ‡’æ¥ç€ï¼Œç°åœ¨åªæœ‰è‡ªå·±åŠ¨æ‰‹é€ è½®å­äº†ã€‚

æ•´ä½“æ€è·¯å¤§æ¦‚å°±æ˜¯åœ¨scrollViewä¸­æ·»åŠ å¤šä¸ªview,è®©è¿™å‡ ä¸ªviewä¾æ¬¡æ’åˆ—åœ¨åœ¨scrollViewä¸­ï¼ŒåŠ¨æ€è®¡ç®—scrollViewçš„frame,è®©å…¶å®½åº¦åˆšå¥½æ˜¯æ‰€æœ‰viewçš„æ€»å®½åº¦å’Œï¼Œç„¶åæŠŠscrollViewçš„xåˆå§‹å€¼è®¾ç½®åœ¨å±å¹•ä»¥å¤–ï¼Œé€šè¿‡ä¸€ä¸ªå®šæ—¶å™¨ï¼Œè®©scrollViewæ¯éš”ä¸€æ®µæ—¶é—´å°±ç§»åŠ¨ä¸€å®šçš„è·ç¦»ï¼Œè¿™ä¸ªæ—¶é—´å¯ä»¥å¾®è°ƒï¼Œç¡®ä¿ä¸ä¼šå‡ºç°æ»šåŠ¨çš„æ—¶å€™æŠ–åŠ¨çš„é—®é¢˜ï¼Œå½“scrollViewæ»šå‡ºå¯è§åŒºåŸŸäº†ï¼Œå†æŠŠscrollViewçš„frameæ¢å¤åˆ°åˆå§‹å€¼å³å¯

[Swiftç‰ˆæœ¬](https://github.com/qqcc1388/MarqueeView-Swift)è·‘é©¬ç¯è¯·ç‚¹å‡»

å…ˆçœ‹ä¸‹æ•ˆæœå›¾å§ï¼Œ
![](https://github.com/qqcc1388/MarqueeViewDemo/blob/master/source/marquee.gif)

æˆ‘çš„è¿™ä¸ªdemoä¸­åˆ†ä¸º3ä¸ªéƒ¨åˆ†
* HXQMarqueeView ç”¨æ¥æ˜¾ç¤ºè·‘é©¬ç¯çš„æ˜¾ç¤ºåŒºåŸŸï¼Œæ¥å—æ»šåŠ¨çš„æ•°æ®æºï¼Œå¹¶ä¸”æ‰‹åŠ¨æ§åˆ¶åŠ¨ç”»çš„å¼€å¯ã€‚
* HXQBoardView è·‘é©¬ç¯ä¸­æ¯ç»„æ•°æ®çš„æ˜¾ç¤ºåŒºåŸŸï¼Œè¿™ä¸ªè§†å›¾çš„é•¿åº¦æ˜¯æ ¹æ®ä¼ å…¥æ–‡å­—çš„å¤šå°‘ï¼ŒåŠ¨æ€è®¡ç®—çš„ï¼Œå¦‚æœæ–‡å­—æˆ–è€…å¤´åƒè¢«ç‚¹å‡»äº†ï¼Œå¯ä»¥é€šè¿‡blockå°†ç‚¹å‡»çš„modelä¼ é€’åˆ°ä¸Šä¸€å±‚
* HXQMarqueeModel è·‘é©¬ç¯æ•°æ®model ä¸»è¦å‚æ•°æ˜¯æ–‡å­—å†…å®¹å’Œå¤´åƒå‚æ•°(å¤´åƒæ˜¯ç½‘ç»œå›¾ç‰‡),è®¾ç½®å®Œæ–‡å­—åï¼Œåœ¨setTitleè¿™ä¸ªæ–¹æ³•ä¸­ä¼šåŠ¨æ€çš„æŠŠæ–‡å­—çš„æ€»å®½åº¦è®¡ç®—ä¸€éï¼Œå¹¶èµ‹å€¼ä¸ºtitleWith,widthçš„å®½åº¦ä¸ºæ–‡å­—+å¤´åƒçš„æ€»å®½åº¦

éƒ¨åˆ†å®ç°ä»£ç 
```
//
//  HXQMarqueeView.m
//  hxquan
//
//  Created by Tiny on 2018/3/2.
//  Copyright Â© 2018å¹´ Tiny. All rights reserved.
//

#import "HXQMarqueeView.h"
#import "HXQMarqueeModel.h"
#import "HXQBoardView.h"
#import "UIView+Extionsiton.h"

@interface HXQMarqueeView ()

@property (nonatomic, strong) NSTimer *timer;
@property (nonatomic, strong) UIScrollView *scrollView;
@property (nonatomic, strong) NSMutableArray *viewList;
@property (nonatomic, strong) NSArray *models;
@property (nonatomic, copy) void (^itelClick)(HXQMarqueeModel *);


@end

@implementation HXQMarqueeView

-(void)dealloc{
    [self.timer  invalidate];
    self.timer = nil;
}

-(NSMutableArray *)viewList{
    if (!_viewList) {
        _viewList = [NSMutableArray array];
    }
    return _viewList;
}

-(NSTimer *)timer{
    if (!_timer) {
        _timer = [NSTimer timerWithTimeInterval:0.008f target:self selector:@selector(refreshProgress) userInfo:nil repeats:YES];
        [[NSRunLoop currentRunLoop] addTimer:_timer forMode:NSRunLoopCommonModes];
    }
    return _timer;
}

-(instancetype)initWithFrame:(CGRect)frame{
    
    if (self = [super initWithFrame:frame]) {
        
        [self setupUI];
    }
    return self;
}

-(void)setupUI{
    self.scrollView = [[UIScrollView alloc] initWithFrame:self.bounds];
    self.scrollView.scrollEnabled = NO;
    self.scrollView.showsVerticalScrollIndicator = NO;
    self.scrollView.showsHorizontalScrollIndicator = NO;
    [self addSubview:self.scrollView];
}

-(void)setItems:(NSArray *)items{

    _models = items;
    //ç§»é™¤åŠ¨ç”»
    [self.scrollView.layer removeAllAnimations];
    
    //å…ˆç§»é™¤ä¹‹å‰çš„item
    for (UIView *v in self.scrollView.subviews) {
        if ([v isKindOfClass:[HXQBoardView class]]) {
            [v removeFromSuperview];
        }
    }
    [self.viewList removeAllObjects];
    
    //åˆ›å»ºæ–°çš„item
    HXQBoardView *last = nil;
    CGFloat margin = 20;
    for (int i = 0; i < items.count; i++) {
        HXQMarqueeModel *model = items[i];
        HXQBoardView * lb = [[HXQBoardView alloc] initWithFrame:CGRectMake(last.frame.origin.x + last.bounds.size.width + margin, 0, model.width, 44) Model:model];
        __weak typeof(self) weakself = self;
        lb.boardItemClick = ^(HXQMarqueeModel *xModel) {
            if (weakself.itelClick) {
                weakself.itelClick(xModel);
            }
        };
        lb.tag = i;
        [self.scrollView addSubview:lb];
        [self.viewList addObject:lb];
        last = lb;
    }
    //è®¾ç½®scrollViewçš„contentSize
    self.scrollView.contentSize = CGSizeMake(last.frame.origin.x+last.bounds.size.width, 0);
    CGSize contetnsize = self.scrollView.contentSize;
    self.scrollView.frame = CGRectMake(self.bounds.size.width,0,contetnsize.width+self.bounds.size.width, 44);
    self.clipsToBounds = YES;
}

-(void)refreshProgress{
    
    self.scrollView.x -=0.5 ;
    if (self.scrollView.x <= -self.scrollView.contentSize.width) {
        self.scrollView.x = self.bounds.size.width;
    }
    
}

- (void)startAnimation {
    if (!self.timer.isValid) {
        [self.timer fire];
    }
}

-(void) stopAnimation{  //ç»“æŸåŠ¨ç”»
    if (self.timer.isValid) {
        [self.timer invalidate];
        self.timer = nil;
    }
}

#pragma mark - Private
-(void)addMarueeViewItemClickBlock:(void (^)(HXQMarqueeModel *))block{
    self.itelClick = block;
}

```

//demoä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•   åªéœ€è¦3è¡Œä»£ç å³å¯(å‰ææ˜¯æ•°æ®æºè¦å‡†å¤‡å¥½å“¦ğŸ˜¯)
```
    //åˆ›å»ºè·‘é©¬ç¯
    HXQMarqueeView *marqueeView = [[HXQMarqueeView alloc] initWithFrame:CGRectMake(0 100,self.view.bounds.size.width, 44)];
    [self.view addSubview:marqueeView];
    //åˆå§‹åŒ–æ•°æ®æº
    [marqueeView setItems:modelList];
    //å¼€å§‹åŠ¨ç”»
    [marqueeView startAnimation];
    //å¦‚æœéœ€è¦ç›‘å¬ç‚¹å‡»å›è°ƒï¼Œè¯·å®ç°è¿™ä¸ªæ–¹æ³•
    [marqueeView addMarueeViewItemClickBlock:^(HXQMarqueeModel *model) {
        NSLog(@"%@",model.title);
    }];
```

æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒdemo: https://github.com/qqcc1388/MarqueeViewDemo 

è½¬è½½è¯·æ ‡æ³¨æ¥æºï¼šhttp://www.cnblogs.com/qqcc1388/p/8664280.html
